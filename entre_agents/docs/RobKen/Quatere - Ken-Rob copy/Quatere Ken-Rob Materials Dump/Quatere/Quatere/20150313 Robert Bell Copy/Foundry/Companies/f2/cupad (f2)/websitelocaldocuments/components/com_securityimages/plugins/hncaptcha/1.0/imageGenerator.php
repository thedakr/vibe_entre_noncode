<?php/** **************************************************************** * This file is part of SecurityImages for Joomla!. * * SecurityImages is free software: you can redistribute it and/or modify * it under the terms of the GNU General Public License as published by * the Free Software Foundation, either version 3 of the License, or * any later version. * Foobar is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License * along with Foobar.  If not, see <http://www.gnu.org/licenses/>. * * @package		SecurityImages * @copyright	Copyright (C) 2004 - 2008 Cdric Walter. All rights reserved. *******************************************************************/defined( '_JEXEC' ) or die( 'Restricted access' );JLoader::import('hn_captcha', dirname( __FILE__ ));require (JPATH_SITE.DS.'administrator'.DS.'components'.DS.'com_securityimages'.DS.'pluginsA'.DS.'hncaptcha'.DS.'1.0'.DS.'config.php');$fullPathToFont = JPATH_SITE.DS.'administrator'.DS.'components'.DS.'com_securityimages'.DS.'fonts'.DS;	//from config.php$CAPTCHA_INIT = array ('tempfolder' => '', 'TTF_folder' => $fullPathToFont, 'TTF_RANGE' => explode(',',$TTF_RANGE), 'chars' =>$chars, 'minsize'=>$minsize, 'maxsize'=>$maxsize, 'maxrotation'=>$maxrotation, 'noise'=>$noise, 'websafecolors'=>$websafecolors, 'refreshlink'=>$refreshlink, 'lang'=>$lang, 'maxtry'=>$maxtry, 'badguys_url'=>$badguys_url, 'secretstring,'=>$secretstring, 'secretposition'=>$secretposition, 'debug'=>$debug,'site_tags0' => $site_tags[0],'site_tags1' => $site_tags[1],'tag_pos' => $tag_pos,'watermarkAntiFreePornAttack' => $watermarkAntiFreePornAttack,'cw_defaultRGBRedBackgroungColor'=>$cw_defaultRGBRedBackgroungColor,'cw_defaultRGBGreenBackgroungColor'=>$cw_defaultRGBGreenBackgroungColor,'cw_defaultRGBBlueBackgroungColor'=>$cw_defaultRGBBlueBackgroungColor,'cw_useRandomBackgroungColor'=>$cw_useRandomBackgroungColor,'cw_minRGBBackgroungColor'=>$cw_minRGBBackgroungColor,'cw_maxRGBBackgroungColor'=>$cw_maxRGBBackgroungColor);$captcha = & new hn_captcha($CAPTCHA_INIT);$captcha->make_captcha();$session =& JFactory::getSession();//Ive add accessor on private properties, it is bad bu HNCaptcha is too monolithic:// it is mixing model, view and controller in one class$session->set('publicKey',$captcha->getPublicKey());$session->set('hnkey',$captcha->getKey());$session->set('privateKey',$captcha->getPrivateKey());/*error_log("*****************". $session->getId());error_log("publickey " . $captcha->getPublicKey());error_log("hnkey " . $captcha->getKey());error_log("privateKey " . $captcha->getPrivateKey());*/?>