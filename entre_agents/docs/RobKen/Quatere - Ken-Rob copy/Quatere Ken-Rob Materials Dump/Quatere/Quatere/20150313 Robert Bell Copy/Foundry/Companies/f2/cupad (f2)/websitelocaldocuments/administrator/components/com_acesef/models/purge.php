<?php/*** @version		1.1.0* @package		AceSEF* @subpackage	AceSEF* @copyright	2009 JoomAce LLC, www.joomace.net* @license		GNU/GPL*/// No Permissiondefined('_JEXEC') or die('Restricted Access');// Import JModeljimport('joomla.application.component.model');// Purge URLs Model Classclass AcesefModelPurge extends JModel {		// Main constructer	function __construct() {        parent::__construct();    }    	// Purge URLs    function purge() {        if($this->getPurgeWhere($where) === false)			return false;                $db =& JFactory::getDBO();        $db->setQuery("DELETE FROM #__acesef_urls WHERE locked = '0' $where");        return $db->query();    }		// Purge component URLs    function purgeComponent($component) {        $db =& JFactory::getDBO();		$where = "WHERE (url_real LIKE '%option=$component&%' OR url_real LIKE '%option=$component') AND locked = '0' AND date = '0000-00-00' AND url_real != ''";        $db->setQuery("DELETE FROM #__acesef_urls $where");        return $db->query();    }    	// Count URLs    function getCount() {        if($this->getPurgeWhere($where) === false)            return 0;                $db =& JFactory::getDBO();        $db->setQuery("SELECT COUNT(*) FROM #__acesef_urls WHERE locked = '0' $where");        $this->count = $db->loadResult();        return $this->count;    }    	// Purge Filter    function getPurgeWhere(&$where) {        $type = JRequest::getVar('type');        if(($type >= 1) && ($type <= 3)) {            if($type == 1)                $where = "AND date = '0000-00-00' AND url_real != ''"; // SEF URLs            elseif($type == 2)                $where = "AND date > '0000-00-00' AND url_real != '' "; // Custom URLs            elseif($type == 3)                $where = "AND url_real = '' "; // 404 URLs        } else            $where = "";                return true;    }}?>