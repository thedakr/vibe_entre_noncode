<?php/** **************************************************************** * This file is part of SecurityImages for Joomla!. * * SecurityImages is free software: you can redistribute it and/or modify * it under the terms of the GNU General Public License as published by * the Free Software Foundation, either version 3 of the License, or * any later version. * Foobar is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License * along with Foobar.  If not, see <http://www.gnu.org/licenses/>. * * @package		SecurityImages * @copyright	Copyright (C) 2004 - 2008 Cédric Walter. All rights reserved. *******************************************************************/defined( '_JEXEC' ) or die( 'Restricted access' );function savePluginSettings($option) {	$params_request = array (			'securityImagesRecaptchaPublicKey',			'securityImagesRecaptchaPrivateKey'			);			foreach ($params_request as $val) {				$$val = JRequest::getVar( $val, '');			}			saveConfig($option, $securityImagesRecaptchaPublicKey, $securityImagesRecaptchaPrivateKey);}function showConfig($option) {	global $securityImagesVersion, $securityImagesLink;	$database = & JFactory::getDBO();	jimport('joomla.html.pane');	$copyright = "<p></br>" . "" . "</br>" . "" . "</br></br></br>" . "<font class='smalldark'><b>recaptcha</b> - see <a href='http://recaptcha.net'>recaptcha.net</a></font></p>" . "<font class='smalldark'><b>" . $securityImagesVersion . "</b> - Copyright 2008 by Cedric Walter - <a href='http://www.waltercedric.com'>www.waltercedric.com</a></font></p>";	include_once (JPATH_SITE .DS.'administrator'.DS.'components'.DS.'com_securityimages'.DS.'pluginsA'.DS.'recaptcha'.DS.'1.10'.DS.'config.php');	?><script language="javascript" type="text/javascript">    function submitbutton(pressbutton) {      var form = document.adminForm;      if (pressbutton == 'cancel') {        submitform( pressbutton );        return;      }        submitform( pressbutton );    }    </script><table cellpadding="0" cellspacing="0" border="0">	<tr>		<td><img			src=<?php echo JURI :: root()."/administrator/components/com_securityimages/logo/com_securityimages.png" ?>>		</td>		<td><b><?php echo JText::_('SECURITY IMAGES ABOUT TITLE') ?></b> <br>		<br>		<?php echo JText::_('SECURITY IMAGES DESCRIPTION') ?> <?php echo $copyright; ?>		</td>	</tr></table><br /><form	action="index2.php" method="post" name="adminForm">		<iframe src="<?php echo JURI :: root().'index.php?option=com_securityimages&task=onSecurityImagesRecaptchaDisplay' ?>" height="300" width="500" frameborder="0"></iframe> <br /><br /><font size="1"><?php echo JText::_('SECURITY IMAGES PREVIEWING2') ?><br />	<?php echo JText::_('SECURITY IMAGES PREVIEWING3') ?></font> <br />	<?php	$jPaneTabs =& JPane::getInstance('sliders');	echo $jPaneTabs->startPane("Security_Images");	echo $jPaneTabs->startPanel("recapctha-plugin v1.10", "HNCaptcha-page");	?><table width="100%" border="0" cellpadding="4" cellspacing="2"	class="adminForm">	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN TTF RANGE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="securityImagesRecaptchaPublicKey"			size="100" value="<?php echo "$securityImagesRecaptchaPublicKey"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN TTF RANGE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN CHARS') ?></strong></td>		<td align="left" valign="top"><input type="text" name="securityImagesRecaptchaPrivateKey" size="100"			value="<?php echo "$securityImagesRecaptchaPrivateKey"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN CHARS HELP') ?></td>	</tr></table><?php echo $jPaneTabs->endPanel(); ?> <?php echo $jPaneTabs->endPane(); ?><input type="hidden" name="option" value="<?php echo $option; ?>"> <!-- <input type="hidden" name="act" value="<php echo $act; >"> --><input type="hidden" name="task" value=""> <input type="hidden"	name="boxchecked" value="0"></form><?php}/** * * @authors Walter Cedric */function saveConfig($option, $securityImagesRecaptchaPublicKey, $securityImagesRecaptchaPrivateKey) {	global $mainframe;	$configfile = dirname( __FILE__ ).DS."config.php";	@ chmod($configfile, 0766);	$permission = is_writable($configfile);	$mosmsg = "Config file " . $configfile . " is not writeable!";	if (!$permission) {		$mainframe->redirect("index2.php?option=$option&act=config", $mosmsg);		break;	}	$config = "<?php\n";	$config .= "// no direct access\n";	$config .= "defined('_JEXEC') or die( 'Restricted access' );\n";	$config .= "\n";	$config .= getCopyright();	$config .= "\n";	$config .= "\$securityImagesRecaptchaPublicKey = \"$securityImagesRecaptchaPublicKey\";\n";	$config .= "\$securityImagesRecaptchaPrivateKey = \"$securityImagesRecaptchaPrivateKey\";\n";	$config .= "?>";	$mosmsg = JText::_('CONFIG_OPEN');	if ($fp = fopen("$configfile", "w"))	{		fputs($fp, $config, strlen($config));		fclose($fp);		$mosmsg = JText::_('CONFIG_OPEN_CLOSED');	}	$mainframe->redirect("index2.php?option=$option&task=settings", JText::_('CONFIG_SAVED') . $configfile);}?>