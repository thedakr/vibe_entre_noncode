<?php/** **************************************************************** * This file is part of SecurityImages for Joomla!. * * SecurityImages is free software: you can redistribute it and/or modify * it under the terms of the GNU General Public License as published by * the Free Software Foundation, either version 3 of the License, or * any later version. * Foobar is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License * along with Foobar.  If not, see <http://www.gnu.org/licenses/>. * * @package		SecurityImages * @copyright	Copyright (C) 2004 - 2008 Cédric Walter. All rights reserved. *******************************************************************/defined( '_JEXEC' ) or die( 'Restricted access' );require_once (JPATH_SITE . '/administrator/components/com_securityimages/pluginsA/hncaptcha/1.0/utils.php');function savePluginSettings($option) {  $params_request = array (			'site_tags0',			'site_tags1',			'site_tags',			'tag_pos',			'watermarkAntiFreePornAttack',			'TTF_RANGE',			'chars',			'minsize',			'maxsize',			'maxrotation',			'noise',			'websafecolors',			'lang',			'maxtry',			'badguys_url',			'secretstring',			'secretposition',			'debug',			'cw_useRandomBackgroungColor',			'cw_minRGBBackgroungColor',			'cw_minRGBBackgroungColor',			'cw_maxRGBBackgroungColor',			'cw_defaultRGBRedBackgroungColor',			'cw_defaultRGBGreenBackgroungColor',			'cw_defaultRGBBlueBackgroungColor'			);			foreach ($params_request as $val) {			  $$val = JRequest::getVar( $val, '');			}			saveConfig($option, $site_tags0, $site_tags1,			$tag_pos, $watermarkAntiFreePornAttack, $TTF_RANGE,			$chars, $minsize, $maxsize, $maxrotation, $noise,			$websafecolors, $lang, $maxtry, $badguys_url,			$secretstring, $secretposition, $debug,			$cw_useRandomBackgroungColor, $cw_minRGBBackgroungColor,			$cw_minRGBBackgroungColor, $cw_maxRGBBackgroungColor,			$cw_defaultRGBRedBackgroungColor, $cw_defaultRGBGreenBackgroungColor,			$cw_defaultRGBBlueBackgroungColor);}function showConfig($option) {  global $securityImagesVersion, $securityImagesLink;  $database = & JFactory::getDBO();  jimport('joomla.html.pane');  $copyright = "<p></br>" . "" . "</br>" . "" . "</br></br></br>" . "<font class='smalldark'><b>HN captcha</b> - PHP-Class hn_captcha Version 1.2, released 16-Apr-2004 Author: Horst Nogajski, horst@nogajski.de - <a href='http://www.nogajski.de'>www.nogajski.de</a></font></p>" . "<font class='smalldark'><b>" . $securityImagesVersion . "</b> - Copyright 2005 by Walter Cedric - <a href='http://www.waltercedric.com'>www.waltercedric.com</a></font></p>";  include_once (JPATH_SITE .DS.'administrator'.DS.'components'.DS.'com_securityimages'.DS.'pluginsA'.DS.'hncaptcha'.DS.'1.0'.DS.'config.php');  ?><script language="javascript" type="text/javascript">    function submitbutton(pressbutton) {      var form = document.adminForm;      if (pressbutton == 'cancel') {        submitform( pressbutton );        return;      }        submitform( pressbutton );    }    </script><table cellpadding="0" cellspacing="0" border="0">	<tr>		<td><img			src=<?php echo JURI :: root()."/administrator/components/com_securityimages/logo/com_securityimages.png" ?>>		</td>		<td><b><?php echo JText::_('SECURITY IMAGES ABOUT TITLE') ?></b> <br>		<br>		<?php echo JText::_('SECURITY IMAGES DESCRIPTION') ?> <?php echo $copyright; ?>		</td>	</tr></table><br /><form	action="index2.php" method="post" name="adminForm"><?php	echo "<img alt='hncaptcha' src='".JURI :: root()."index.php?option=com_securityimages&task=displayCaptchaByPlugin&plugin=hncaptcha&version=1.0' /> ";	?> <br /><br /><font size="1"><?php echo JText::_('SECURITY IMAGES PREVIEWING2') ?><br />	<?php echo JText::_('SECURITY IMAGES PREVIEWING3') ?></font> <br />	<?php	$jPaneTabs =& JPane::getInstance('sliders');	echo $jPaneTabs->startPane("Security_Images");	echo $jPaneTabs->startPanel("HNCaptcha-Core", "HNCaptcha-page");	?><table width="100%" border="0" cellpadding="4" cellspacing="2"	class="adminForm">	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN TTF RANGE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="TTF_RANGE"			size="70" value="<?php echo "$TTF_RANGE"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN TTF RANGE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN CHARS') ?></strong></td>		<td align="left" valign="top"><input type="text" name="chars" size="2"			value="<?php echo "$chars"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN CHARS HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN MINSIZE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="minsize"			size="2" value="<?php echo "$minsize"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN MINSIZE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN MAXSIZE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="maxsize"			size="2" value="<?php echo "$maxsize"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN MAXSIZE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN MAXROTATION') ?></strong></td>		<td align="left" valign="top"><input type="text" name="maxrotation"			size="2" value="<?php echo "$maxrotation"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN MAXROTATION HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN LANG') ?></strong></td>		<td align="left" valign="top"><input type="text" name="lang" size="2"			value="<?php echo "$lang"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN LANG HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN MAXTRY') ?></strong></td>		<td align="left" valign="top"><input type="text" name="maxtry"			size="1" value="<?php echo "$maxtry"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN MAXTRY HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN BADGUYURL') ?></strong></td>		<td align="left" valign="top"><input type="text" name="badguys_url"			size="35" value="<?php echo "$badguys_url"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN BADGUYURL HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN SECRETSTRING') ?></strong></td>		<td align="left" valign="top"><input type="text" name="secretstring"			size="55" value="<?php echo "$secretstring"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN SECRETSTRING HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN SECRET POS') ?></strong></td>		<td align="left" valign="top"><input type="text" name="secretposition"			size="2" value="<?php echo "$secretposition"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN SECRET POS HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN USENOISE') ?></strong></td>		<td align="left" valign="top"><?php		echo JHTML::_('select.booleanlist','noise', 'class="inputbox"', $noise);		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('HN USENOISE HELP') ?></td>	</tr>	</table>		<?php echo $jPaneTabs->endPanel(); ?> <?php echo $jPaneTabs->startPanel(JText::_('HN BKG TITEL'),"Hackers"); ?>	<table width="100%" border="0" cellpadding="4" cellspacing="2"	class="adminForm">	<tr>		<td colspan="3"><b><?php echo JText::_('HN BKG TITEL') ?></b><br />		<table align="center">			<tr>				<td><b><?php echo JText::_('HN BKG RANDOM COLORS') ?></b><br />				<?php echo JHTML::_('select.booleanlist','cw_useRandomBackgroungColor', 'class="inputbox"', $cw_useRandomBackgroungColor);?><br />				<input type="text" name="cw_minRGBBackgroungColor" size="2"					value="<?php echo "$cw_minRGBBackgroungColor"; ?>"> <?php echo JText::_('HN BKG MIN RGB COLOR') ?><br />				<input type="text" name="cw_maxRGBBackgroungColor" size="2"					value="<?php echo "$cw_maxRGBBackgroungColor"; ?>"> <?php echo JText::_('HN BKG MAS RGB COLOR') ?>				</td>				<td><b><?php echo JText::_('HN BKG OR') ?></b></td>				<td><b><?php echo JText::_('HN BKG FIX COLOR') ?></b><br />				<input type="text" name="cw_defaultRGBRedBackgroungColor" size="3"					maxlength="3"					value="<?php echo "$cw_defaultRGBRedBackgroungColor"; ?>"> <?php echo JText::_('HN BKG_RED COLOR') ?><br />				<input type="text" name="cw_defaultRGBGreenBackgroungColor" size="3"					maxlength="3"					value="<?php echo "$cw_defaultRGBGreenBackgroungColor"; ?>"> <?php echo JText::_('HN BKG GREEN COLOR') ?><br />				<input type="text" name="cw_defaultRGBBlueBackgroungColor" size="3"					maxlength="3"					value="<?php echo "$cw_defaultRGBBlueBackgroungColor"; ?>"> <?php echo JText::_('HN BKG BLUE COLOR') ?>				</td>			</tr>		</table>		</td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN WEBSAFE') ?></strong></td>		<td align="left" valign="top"><?php		echo JHTML::_('select.booleanlist','websafecolors', 'class="inputbox"', $websafecolors);		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('HN WEBSAFE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN DEBUG') ?></strong></td>		<td align="left" valign="top"><?php		echo JHTML::_('select.booleanlist','debug', 'class="inputbox"', $debug);		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('HN DEBUG HELP') ?></td>	</tr></table><?php echo $jPaneTabs->endPanel(); ?> <?php echo $jPaneTabs->startPanel("Hackers","Hackers"); ?><table width="100%" border="0" cellpadding="4" cellspacing="2"	class="adminForm">	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN NOTICE HELP TITLE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="site_tags0"			size="70" value="<?php echo "$site_tags[0]"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('HN NOTICE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong>&nbsp;</strong></td>		<td align="left" valign="top"><input type="text" name="site_tags1"			size="70" value="<?php echo "$site_tags[1]"; ?>"></td>		<td align="left" valign="top">&nbsp;</td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('HN NOTICE TITLE'); ?></strong></td>		<td align="left" valign="top"><?php		$stag_pos = array ();		$stag_pos[] = JHTML::_('select.option', '0', 'Top');		$stag_pos[] = JHTML::_('select.option', '1', 'Bottom');		$stag_pos[] = JHTML::_('select.option', '2', 'Both');		$_tag_pos = JHTML::_('select.genericlist',$stag_pos, 'tag_pos', 'class="inputbox" size="3"', 'value', 'text', $tag_pos);		echo $_tag_pos;		?></td>		<td align="left" valign="top" width="50%">&nbsp;</td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong></strong></td>		<td align="left" valign="top"><?php  echo JHTML::_('select.booleanlist','watermarkAntiFreePornAttack', 'class="inputbox"', $watermarkAntiFreePornAttack); ?>		</td>		<td align="left" valign="top" width="50%"><?php echo JText::_('HN ANTIFREEPORNATTACK') ?></td>	</tr></table><?php echo $jPaneTabs->endPanel(); ?> <?php echo $jPaneTabs->endPane(); ?> <input	type="hidden" name="option" value="<?php echo $option; ?>"> <!-- <input type="hidden" name="act" value="<php echo $act; >"> --><input type="hidden" name="task" value=""> <input type="hidden"	name="boxchecked" value="0"></form><?php}/** * * @authors Walter Cedric */function saveConfig($option, $site_tags0,$site_tags1, $tag_pos,$watermarkAntiFreePornAttack, $TTF_RANGE,$chars, $minsize, $maxsize,$maxrotation, $noise,$websafecolors, $lang,$maxtry, $badguys_url,$secretstring, $secretposition,$debug, $cw_useRandomBackgroungColor,$cw_minRGBBackgroungColor, $cw_minRGBBackgroungColor,$cw_maxRGBBackgroungColor, $cw_defaultRGBRedBackgroungColor,$cw_defaultRGBGreenBackgroungColor, $cw_defaultRGBBlueBackgroungColor) {  global $mainframe;  $configfile = JPATH_SITE . "/administrator/components/com_securityimages/pluginsA/hncaptcha/1.0/config.php";  @ chmod($configfile, 0766);  $permission = is_writable($configfile);  $mosmsg = "Config file " . $configfile . " is not writeable!";  if (!$permission) {    $mainframe->redirect("index2.php?option=$option&act=config", $mosmsg);    break;  }  $config = "<?php\n";    $config .= "// no direct access\n";  $config .= "defined('_JEXEC') or die( 'Restricted access' );\n";  $config .= "\n";  $config .= getCopyright();  $config .= "\n";  $config .= "\$site_tags[0] = \"$site_tags0\";\n";  $config .= "\$site_tags[1] = \"$site_tags1\";\n";  $config .= "\$tag_pos = \"$tag_pos\";\n";  $config .= "\$watermarkAntiFreePornAttack = \"$watermarkAntiFreePornAttack\";\n";  $config .= "\$TTF_RANGE = \"$TTF_RANGE\";\n";  $config .= "\$chars = \"$chars\";\n";  $config .= "\$minsize = \"$minsize\";\n";  $config .= "\$maxsize = \"$maxsize\";\n";  $config .= "\$maxrotation = \"$maxrotation\";\n";  $config .= "\$noise = \"$noise\";\n";  $config .= "\$websafecolors = \"$websafecolors\";\n";  $config .= "\$lang = \"$lang\";\n";  $config .= "\$maxtry = \"$maxtry\";\n";  $config .= "\$badguys_url = \"$badguys_url\";\n";  $config .= "\$secretstring = \"$secretstring\";\n";  $config .= "\$secretposition = \"$secretposition\";\n";  $config .= "\$debug = \"$debug\";\n";  $config .= "\$cw_defaultRGBRedBackgroungColor = \"$cw_defaultRGBRedBackgroungColor\";\n";  $config .= "\$cw_defaultRGBGreenBackgroungColor = \"$cw_defaultRGBGreenBackgroungColor\";\n";  $config .= "\$cw_defaultRGBBlueBackgroungColor = \"$cw_defaultRGBBlueBackgroungColor\";\n";  $config .= "\$cw_useRandomBackgroungColor = \"$cw_useRandomBackgroungColor\";\n";  $config .= "\$cw_minRGBBackgroungColor = \"$cw_minRGBBackgroungColor\";\n";  $config .= "\$cw_maxRGBBackgroungColor = \"$cw_maxRGBBackgroungColor\";\n";  //You are  not allowed to modify this copyright, but You can add your version number and links  /*   $securityImagesVersion = "SecurityImage hncaptcha 1.0";   $securityImagesLink = "<a href='http://www.waltercedric.com' target='_blank'>SecurityImage hncaptcha 1.0</a>";   */  $config .= "?>";  $mosmsg = JText::_('CONFIG_OPEN');  if ($fp = fopen("$configfile", "w"))  {    fputs($fp, $config, strlen($config));    fclose($fp);    $mosmsg = JText::_('CONFIG_OPEN_CLOSED');  }  $mainframe->redirect("index2.php?option=$option&task=settings", JText::_('CONFIG_SAVED') . $configfile);}?>