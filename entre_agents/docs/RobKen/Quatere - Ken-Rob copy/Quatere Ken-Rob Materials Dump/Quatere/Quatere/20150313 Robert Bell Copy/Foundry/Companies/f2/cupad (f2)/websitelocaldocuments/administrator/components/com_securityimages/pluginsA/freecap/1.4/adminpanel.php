<?php/** **************************************************************** * This file is part of SecurityImages for Joomla!. * * SecurityImages is free software: you can redistribute it and/or modify * it under the terms of the GNU General Public License as published by * the Free Software Foundation, either version 3 of the License, or * any later version. * Foobar is distributed in the hope that it will be useful, * but WITHOUT ANY WARRANTY; without even the implied warranty of * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the * GNU General Public License for more details. * * You should have received a copy of the GNU General Public License * along with Foobar.  If not, see <http://www.gnu.org/licenses/>. * * @package		SecurityImages * @copyright	Copyright (C) 2004 - 2008 Cédric Walter. All rights reserved. *******************************************************************/defined( '_JEXEC' ) or die( 'Restricted access' );require_once (JPATH_SITE . '/administrator/components/com_securityimages/pluginsA/freecap/1.4/utils.php');function savePluginSettings($option) {    $params_request = array (			'site_tags0',			'site_tags1',			'site_tags',			'tag_pos',			'rand_func',			'seed_func',			'hash_func',			'output',			'use_dict',			'max_word_length',			'col_type',			'max_attempts',			'blur_bg',			'merge_type',			'morph_bg'			);			foreach ($params_request as $val) {					$$val = JRequest::getVar( $val, '');			}			saveConfig($option, $site_tags0, $site_tags1, $site_tags, $tag_pos, $rand_func, $seed_func, $hash_func, $output, $use_dict, $max_word_length, $col_type, $max_attempts, $blur_bg, $merge_type, $morph_bg);			break;}function showConfig($option) {  global $securityImagesVersion, $securityImagesLink;  $copyright = "<p></br>" .	"" .	"</br>" .	"" .	"</br></br></br>" .	"<font class='smalldark'><b>freeCap v1.4</b> - Copyright 2005 Howard Yeend - <a href='http://www.puremango.co.uk'>www.puremango.co.uk</a></font></p>" .	"<font class='smalldark'><b>" . $securityImagesVersion . "</b> - Copyright 2005 by Walter Cedric - <a href='http://www.puremango.co.uk'>www.puremango.co.uk</a></font></p>";  include_once (JPATH_SITE . '/administrator/components/com_securityimages/pluginsA/freecap/1.4/config.php');  ?><script language="javascript" type="text/javascript">    function submitbutton(pressbutton) {      var form = document.adminForm;      if (pressbutton == 'cancel') {        submitform( pressbutton );        return;      }        submitform( pressbutton );    }    </script><table cellpadding="0" cellspacing="0" border="0">	<tr>		<td><img			src=<?php echo JURI :: root()."/administrator/components/com_securityimages/logo/com_securityimages.png" ?>>		</td>		<td><b><?php echo JText::_('SECURITY IMAGES ABOUT TITLE') ?></b> <br>		<br>		<?php echo JText::_('SECURITY IMAGES DESCRIPTION') ?> <?php echo $copyright; ?>		</td>	</tr></table><br /><form action="index2.php" method="post" name="adminForm"><?phpecho "<img alt='hncaptcha' src='".JURI :: root()."index.php?option=com_securityimages&task=displayCaptchaByPlugin&plugin=freecap&version=1.4' /> ";?> <br /><br /><font size="1"><?php echo JText::_('SECURITY IMAGES PREVIEWING2') ?><br /><?php echo JText::_('SECURITY IMAGES PREVIEWING3') ?></font> <br /><?phpjimport('joomla.html.pane');$jPaneTabs =& JPane::getInstance('sliders');$jPaneTabs->startPane("Security_Images");$jPaneTabs->startPanel("HNCaptcha-Core", "HNCaptcha-page");?><table width="100%" border="0" cellpadding="4" cellspacing="2"	class="adminForm">	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP NOTICE HELP TITLE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="site_tags0"			size="35" value="<?php echo "$site_tags[0]"; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('FREECAP NOTICE HELP') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong>&nbsp;</strong></td>		<td align="left" valign="top"><input type="text" name="site_tags1"			size="35" value="<?php echo "$site_tags[1]"; ?>"></td>		<td align="left" valign="top">&nbsp;</td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP NOTICE TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$stag_pos = array ();		$stag_pos[] = JHTML::_('select.option','0', 'Top');		$stag_pos[] = JHTML::_('select.option','1', 'Bottom');		$stag_pos[] = JHTML::_('select.option','2', 'Both');		$_tag_pos = JHTML::_('select.genericlist',$stag_pos, 'tag_pos', 'class="inputbox" size="3"', 'value', 'text', $tag_pos);		echo $_tag_pos;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP NOTICE') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP HASHING TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$shasfunc = array ();		//The US Secure Hash Algorithm takes a message of less than 264 bits in length and		//produces a 160-bit message digest designed so that it is computationally very		//expensive to find a text string that matches a given hash		$shasfunc[] = JHTML::_('select.option','sha1', 'sha1');		//Hashing technique that creates 128-bit message digest.		$shasfunc[] = JHTML::_('select.option','md5', 'md5');		//A cyclic redundancy check (CRC) is a type of hash function used to produce a checksum		$shasfunc[] = JHTML::_('select.option','crc32', 'crc32');		$mhashfunc = JHTML::_('select.genericlist',$shasfunc, 'hash_func', 'class="inputbox" size="3"', 'value', 'text', $hash_func);		echo $mhashfunc;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP HASHING') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP IMAGE TYPE TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$soutput[] = JHTML::_('select.option','jpg', 'jpg');		$soutput[] = JHTML::_('select.option','png', 'png');		$soutput[] = JHTML::_('select.option','gif', 'gif');		$_output = JHTML::_('select.genericlist',$soutput, 'output', 'class="inputbox" size="3"', 'value', 'text', $output);		echo $_output;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP IMAGE TYPE') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP BKG') ?></strong></td>		<td align="left" valign="top"><?php		$sbkg[] = JHTML::_('select.option','0', JText::_('FREECAP BKG VALUE0'));		$sbkg[] = JHTML::_('select.option','1', JText::_('FREECAP BKG VALUE1'));		$sbkg[] = JHTML::_('select.option','2', JText::_('FREECAP BKG VALUE2'));		$sbkg[] = JHTML::_('select.option','3', JText::_('FREECAP BKG VALUE3'));		$_bkg = JHTML::_('select.genericlist',$sbkg, 'col_type', 'class="inputbox" size="4"', 'value', 'text', $col_type);		echo $_bkg;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP BKG BLUR') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP MERGE BKG TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$smerge_type[] = JHTML::_('select.option','0', JText::_('FREECAP BKG VALUE0'));		$smerge_type[] = JHTML::_('select.option','1', JText::_('FREECAP BKG VALUE1'));		$_merge_type = JHTML::_('select.genericlist',$smerge_type, 'merge_type', 'class="inputbox" size="2"', 'value', 'text', $merge_type);		echo $_merge_type;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP MERGE BKG') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP MORPH BKG TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$smorph_bg[] = JHTML::_('select.option','false', "false");		$smorph_bg[] = JHTML::_('select.option','true', "true");		$_morph_bg = JHTML::_('select.genericlist',$smorph_bg, 'morph_bg', 'class="inputbox" size="2"', 'value', 'text', $morph_bg);		echo $_morph_bg;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP MORPH BKG') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP MAX RETRY TITLE') ?></strong></td>		<td align="left" valign="top"><input type="text" name="max_attempts"			value="<?php echo $max_attempts; ?>"></td>		<td align="left" valign="top"><?php echo JText::_('FREECAP MAX RETRY') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP MAX TEXT LENGTH TITLE') ?></strong></td>		<td align="left" valign="top"><input type="text"			name="max_word_length" value="<?php echo $max_word_length; ?>"			size="2"></td>		<td align="left" valign="top"><?php echo JText::_('FREECAP MAX TEXT LENGTH')?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP TEXT COLOR TITLE') ?></strong></td>		<td align="left" valign="top"><?php		echo  JHTML::_('select.booleanlist','col_type', 'class="inputbox"', $col_type);		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP TEXT COLOR') ?></td>	</tr>	<tr align="center" valign="middle">		<td align="left" valign="top"><strong><?php echo JText::_('FREECAP TEXT GENERATION TITLE') ?></strong></td>		<td align="left" valign="top"><?php		$usedict[] = JHTML::_('select.option','0', "Generate pseudo-random string");		$usedict[] = JHTML::_('select.option','1', "Use dictionary");		$susedict = JHTML::_('select.genericlist',$usedict, 'use_dict', 'class="inputbox" size="2"', 'value', 'text', $use_dict);		echo $susedict;		?></td>		<td align="left" valign="top" width="50%"><?php echo JText::_('FREECAP TEXT GENERATION') ?></td>	</tr></table>		<?php		echo $jPaneTabs->endPane();		echo $jPaneTabs->endPanel();		?> <input type="hidden" name="option" value="<?php echo $option; ?>"><input type="hidden" name="task" value=""> <input type="hidden"	name="boxchecked" value="0"></form>		<?php}/** * * @authors Walter Cedric */function saveConfig($option, $site_tags0, $site_tags1,$site_tags, $tag_pos, $rand_func,$seed_func, $hash_func, $output,$use_dict, $max_word_length,$col_type, $max_attempts,$blur_bg, $merge_type, $morph_bg) {  global $mainframe;  $configfile = JPATH_SITE . "/administrator/components/com_securityimages/pluginsA/freecap/1.4/config.php";  @ chmod($configfile, 0766);  $permission = is_writable($configfile);  $mosmsg = "Config file " . $configfile . " is not writeable!";  if (!$permission) {    $mainframe->redirect("index2.php?option=$option&task=settings", $mosmsg);    break;  }  $rand_func = "mt_rand";  $seed_func = "mt_srand";  $config = "<?php\n";    $config .= "// no direct access\n";  $config .= "defined('_JEXEC') or die( 'Restricted access' );\n";  $config .= "\n";  $config .= getCopyright();  $config .= "\n";  $config .= "\$site_tags[0] = \"$site_tags0\";\n";  $config .= "\$site_tags[1] = \"$site_tags1\";\n";  $config .= "\$tag_pos = \"$tag_pos\";\n";  $config .= "\$rand_func = \"$rand_func\";\n";  $config .= "\$seed_func = \"$seed_func\";\n";  $config .= "\$hash_func = \"$hash_func\";\n";  $config .= "\$output = \"$output\";\n";  $config .= "\$use_dict = \"$use_dict\";\n";  $config .= "\$max_word_length = \"$max_word_length\";\n";  $config .= "\$col_type = \"$col_type\";\n";  $config .= "\$max_attempts = \"$max_attempts\";\n";  $config .= "\$blur_bg = \"$blur_bg\";\n";  $config .= "\$merge_type = \"$merge_type\";\n";  $config .= "\$morph_bg = \"$morph_bg\";\n";  $config .= "?>";  $mosmsg = JText::_('CONFIG_OPEN');  if ($fp = fopen("$configfile", "w"))  {    fputs($fp, $config, strlen($config));    fclose($fp);    $mosmsg = JText::_('CONFIG_OPEN_CLOSED');  }  $mainframe->redirect("index2.php?option=$option&task=settings", JText::_('CONFIG_SAVED') . $configfile);}?>